/*! recat 2016-02-16 00:22:21 */
!function(){"use strict";angular.module("recatLibrary",[])}(),function(){"use strict";function a(a,b){function c(a,b,c){return d(a,b,c)}function d(b,c,d){var g={condition:c};b&&(g.page=parseInt(b,10)),d.length&&(g.tid=d.join(","));var h=a({url:Drupal.settings.recatLibrary.serviceUrl,method:"GET",cache:!0,params:g});return h.then(e,f)}function e(a){return 200!==a.status?b.reject(a.statusText):a.data.success?a.data:b.reject(a.data.message)}function f(a){return angular.isObject(a.data)?b.reject(a.statusText):b.reject("An error occurred")}return{getFiles:c}}angular.module("recatLibrary").service("core.service.library",a),a.$inject=["$http","$q"]}(),function(){"use strict";function a(a,b,c,d){function e(){w.currentPage-=1,k()}function f(){w.currentPage+=1,k()}function g(a){w.currentPage=parseInt(a,10)-1,k()}function h(a,b){var c=!!a.target.checked;c?y.push(b):y=m(b),k()}function i(a){if(r())return s(),w.isFirstDownloadRequest=!1,Drupal.behaviors.recatWfOverlay.openOverlayer(x.overlayUrl),void p();if(a.url)return a["private"]&&q()?void Drupal.behaviors.recatWfOverlay.openOverlayer(a.url):void(document.location=a.url)}function j(){p(!0),s(),w.isFirstDownloadRequest=!1,setTimeout(p,100)}function k(){p(!0),w.loading=!0,d.getFiles(w.currentPage,z,y).then(n,o)}function l(){var a=[],b=Math.ceil(v/2),c=w.currentPage+1,d=c-b+1,e=c+v-b,f=w.totalPages,g=d;for(e>f&&(g+=f-e,e=f),0>=g&&(e+=1-g,g=1),g>1&&a.push("ellipsis");e>=g&&f>=g;g+=1)a.push(g);return f>g&&a.push("ellipsis"),a}function m(a){for(var b=[],c=0,d=y.length;d>c;c+=1)a!==y[c]&&b.push(y[c]);return b}function n(a){w.loaded=!0,w.loading=!1,w.nodes=a.nodes,w.currentPage=a.pager.current,w.totalPages=a.pager.pages,w.pages=l(),setTimeout(p,100)}function o(a){w.loaded=!0,w.loading=!1,w.nodes=w.pages=[],w.currentPage=w.totalPages=0,w.errorMessage=a.text}function p(a){return q()?a?void Drupal.behaviors.recatWfOverlay.detach(b):void Drupal.behaviors.recatWfOverlay.attach(b):void 0}function q(){return Drupal&&Drupal.behaviors&&Drupal.behaviors.recatWfOverlay}function r(){return q()?!t(x.cookieName):!1}function s(){var a=new Date;a.setFullYear(a.getFullYear()+10),document.cookie=x.cookieName+"="+(new Date).getTime()+"; expires="+a.toGMTString()+"; path=/"}function t(a){var b="; "+document.cookie,c=b.split("; "+a+"=");return 2===c.length?c.pop().split(";").shift():void 0}function u(a){return a&&Drupal.settings[a]?angular.extend(Drupal.settings[a],Drupal.settings.recatLibrary):Drupal.settings.recatLibrary}var v=9,w=this,x=u(c.instance),y=[],z=x.condition;if(w.loaded=!1,w.loading=!0,w.currentPage=0,w.totalPages=0,w.pages=[],w.nodes=[],w.errorMessage="",w.pagePrevious=e,w.pageNext=f,w.pageChange=g,w.filterChange=h,w.downloadFile=i,w.requestFile=j,w.isFirstDownloadRequest=r(),w.firstDownloadRequestUrl=x.overlayUrl,x.tid)for(var A=x.tid.split(","),B=0,C=A.length;C>B;B+=1)y.push(A[B]);k()}angular.module("recatLibrary").controller("ListingController",a),a.$inject=["$scope","$element","$attrs","core.service.library"]}();