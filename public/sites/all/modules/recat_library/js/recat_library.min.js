/*! recat 2015-10-27 22:43:03 */
!function(){"use strict";function a(){}angular.module("recatLibrary",[]).run(a),a.$inject=[]}(),function(){"use strict";function a(a,b){function c(a,b){return d(a,b)}function d(b,c){var d={};b&&(d.page=parseInt(b,10)),c.length&&(d.tid=c.join(","));var g=a({url:Drupal.settings.recatLibrary.serviceUrl,method:"GET",cache:!0,params:d});return g.then(e,f)}function e(a){return 200!==a.status?b.reject(a.statusText):a.data.success?a.data:b.reject(a.data.message)}function f(a){return angular.isObject(a.data)?b.reject(a.statusText):b.reject("An error occurred")}return{getFiles:c}}angular.module("recatLibrary").service("core.service.library",a),a.$inject=["$http","$q"]}(),function(){"use strict";function a(a,b,c){function d(){q.currentPage-=1,i()}function e(){q.currentPage+=1,i()}function f(a){q.currentPage=parseInt(a,10)-1,i()}function g(a,b){var c=!!a.target.checked;c?r.push(b):r=k(b),i()}function h(a){return a.url?a["private"]&&o()?void Drupal.behaviors.recatWfOverlay.openOverlayer(a.url):void(document.location=a.url):void 0}function i(){n(!0),q.loading=!0,c.getFiles(q.currentPage,r).then(l,m)}function j(){var a=[],b=Math.ceil(p/2),c=q.currentPage+1,d=c-b+1,e=c+p-b,f=q.totalPages,g=d;for(e>f&&(g+=f-e,e=f),0>=g&&(e+=1-g,g=1),g>1&&a.push("ellipsis");e>=g&&f>=g;g+=1)a.push(g);return f>g&&a.push("ellipsis"),a}function k(a){for(var b=[],c=0,d=r.length;d>c;c+=1)a!==r[c]&&b.push(r[c]);return b}function l(a){q.loaded=!0,q.loading=!1,q.nodes=a.nodes,q.currentPage=a.pager.current,q.totalPages=a.pager.pages,q.pages=j(),setTimeout(n,100)}function m(a){q.loaded=!0,q.loading=!1,q.nodes=q.pages=[],q.currentPage=q.totalPages=0,q.errorMessage=a.text}function n(a){return o()?a?void Drupal.behaviors.recatWfOverlay.detach(b):void Drupal.behaviors.recatWfOverlay.attach(b):void 0}function o(){return Drupal&&Drupal.behaviors&&Drupal.behaviors.recatWfOverlay}var p=9,q=this,r=[];q.loaded=!1,q.loading=!0,q.currentPage=0,q.totalPages=0,q.pages=[],q.nodes=[],q.errorMessage="",q.pagePrevious=d,q.pageNext=e,q.pageChange=f,q.filterChange=g,q.downloadFile=h,Drupal.settings.recatLibrary.tid&&r.push(Drupal.settings.recatLibrary.tid),i()}angular.module("recatLibrary").controller("ListingController",a),a.$inject=["$scope","$element","core.service.library"]}();