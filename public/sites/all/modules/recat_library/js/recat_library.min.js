/*! recat 2015-11-23 23:04:27 */
!function(){"use strict";function a(){}angular.module("recatLibrary",[]).run(a),a.$inject=[]}(),function(){"use strict";function a(a,b){function c(a,b){return d(a,b)}function d(b,c){var d={};b&&(d.page=parseInt(b,10)),c.length&&(d.tid=c.join(","));var g=a({url:Drupal.settings.recatLibrary.serviceUrl,method:"GET",cache:!0,params:d});return g.then(e,f)}function e(a){return 200!==a.status?b.reject(a.statusText):a.data.success?a.data:b.reject(a.data.message)}function f(a){return angular.isObject(a.data)?b.reject(a.statusText):b.reject("An error occurred")}return{getFiles:c}}angular.module("recatLibrary").service("core.service.library",a),a.$inject=["$http","$q"]}(),function(){"use strict";function a(a,b,c){function d(){u.currentPage-=1,j()}function e(){u.currentPage+=1,j()}function f(a){u.currentPage=parseInt(a,10)-1,j()}function g(a,b){var c=!!a.target.checked;c?v.push(b):v=l(b),j()}function h(a){if(q())return r(),u.isFirstDownloadRequest=!1,Drupal.behaviors.recatWfOverlay.openOverlayer(Drupal.settings.recatLibrary.overlayUrl),void o();if(a.url)return a["private"]&&p()?void Drupal.behaviors.recatWfOverlay.openOverlayer(a.url):void(document.location=a.url)}function i(){o(!0),r(),u.isFirstDownloadRequest=!1,setTimeout(o,100)}function j(){o(!0),u.loading=!0,c.getFiles(u.currentPage,v).then(m,n)}function k(){var a=[],b=Math.ceil(t/2),c=u.currentPage+1,d=c-b+1,e=c+t-b,f=u.totalPages,g=d;for(e>f&&(g+=f-e,e=f),0>=g&&(e+=1-g,g=1),g>1&&a.push("ellipsis");e>=g&&f>=g;g+=1)a.push(g);return f>g&&a.push("ellipsis"),a}function l(a){for(var b=[],c=0,d=v.length;d>c;c+=1)a!==v[c]&&b.push(v[c]);return b}function m(a){u.loaded=!0,u.loading=!1,u.nodes=a.nodes,u.currentPage=a.pager.current,u.totalPages=a.pager.pages,u.pages=k(),setTimeout(o,100)}function n(a){u.loaded=!0,u.loading=!1,u.nodes=u.pages=[],u.currentPage=u.totalPages=0,u.errorMessage=a.text}function o(a){return p()?a?void Drupal.behaviors.recatWfOverlay.detach(b):void Drupal.behaviors.recatWfOverlay.attach(b):void 0}function p(){return Drupal&&Drupal.behaviors&&Drupal.behaviors.recatWfOverlay}function q(){return p()?!s(Drupal.settings.recatLibrary.cookieName):!1}function r(){var a=new Date;a.setFullYear(a.getFullYear()+10),document.cookie=Drupal.settings.recatLibrary.cookieName+"="+(new Date).getTime()+"; expires="+a.toGMTString()+"; path=/"}function s(a){var b="; "+document.cookie,c=b.split("; "+a+"=");return 2===c.length?c.pop().split(";").shift():void 0}var t=9,u=this,v=[];if(u.loaded=!1,u.loading=!0,u.currentPage=0,u.totalPages=0,u.pages=[],u.nodes=[],u.errorMessage="",u.pagePrevious=d,u.pageNext=e,u.pageChange=f,u.filterChange=g,u.downloadFile=h,u.requestFile=i,u.isFirstDownloadRequest=q(),u.firstDownloadRequestUrl=Drupal.settings.recatLibrary.overlayUrl,Drupal.settings.recatLibrary.tid)for(var w=Drupal.settings.recatLibrary.tid.split(","),x=0,y=w.length;y>x;x+=1)v.push(w[x]);j()}angular.module("recatLibrary").controller("ListingController",a),a.$inject=["$scope","$element","core.service.library"]}();