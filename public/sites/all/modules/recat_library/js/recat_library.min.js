/*! recat 2016-03-15 21:11:51 */
!function(){"use strict";angular.module("recatLibrary",[])}(),function(){"use strict";function a(a,b){function c(a,b,c,e,f,g){return d(a,b,c,e,f,g)}function d(b,c,d,g,h,i){var j={searchQuery:b};c&&(j.page=parseInt(c,10)),d&&(j.condition=d),g&&(j.sort=g),h&&(j.sortOrder=h),i.length&&(j.tid=i.join(","));var k=a({url:Drupal.settings.recatLibrary.serviceUrl,method:"GET",cache:!0,params:j});return k.then(e,f)}function e(a){return 200!==a.status?b.reject(a.statusText):a.data.success?a.data:b.reject(a.data.message)}function f(a){return angular.isObject(a.data)?b.reject(a.statusText):b.reject("An error occurred")}return{getFiles:c}}angular.module("recatLibrary").service("core.service.library",a),a.$inject=["$http","$q"]}(),function(){"use strict";function a(a,b,c,d){function e(){B.currentPage-=1,m()}function f(){B.currentPage+=1,m()}function g(a){B.currentPage=parseInt(a,10)-1,m()}function h(a,b){var c=!!a.target.checked;c?D.push(b):D=o(b),m()}function i(a){if(F===a)switch(G){case"asc":G="desc";break;case"desc":G="asc"}else F=a,G="asc";m()}function j(){m()}function k(a){if(t())return w(),B.isFirstDownloadRequest=!1,Drupal.behaviors.recatWfOverlay.openOverlayer(C.overlayUrl),void r();if(a.url)return a["private"]&&s()?void Drupal.behaviors.recatWfOverlay.openOverlayer(a.url):void(document.location=a.url)}function l(){r(!0),w(),B.isFirstDownloadRequest=!1,setTimeout(r,100)}function m(){r(!0),B.loading=!0,d.getFiles(B.searchQuery,B.currentPage,E,F,G,D).then(p,q)}function n(){var a=[],b=Math.ceil(A/2),c=B.currentPage+1,d=c-b+1,e=c+A-b,f=B.totalPages,g=d;for(e>f&&(g+=f-e,e=f),0>=g&&(e+=1-g,g=1),g>1&&a.push("ellipsis");e>=g&&f>=g;g+=1)a.push(g);return f>g&&a.push("ellipsis"),a}function o(a){for(var b=[],c=0,d=D.length;d>c;c+=1)a!==D[c]&&b.push(D[c]);return b}function p(a){B.loaded=!0,B.loading=!1,B.nodes=a.nodes,B.currentPage=a.pager.current,B.totalPages=a.pager.pages,B.pages=n(),x(),setTimeout(r,100)}function q(a){B.loaded=!0,B.loading=!1,B.nodes=B.pages=[],B.currentPage=B.totalPages=0,B.errorMessage=a.text}function r(a){return s()?a?void Drupal.behaviors.recatWfOverlay.detach(b):void Drupal.behaviors.recatWfOverlay.attach(b):void 0}function s(){return Drupal&&Drupal.behaviors&&Drupal.behaviors.recatWfOverlay}function t(){return s()?!y(C.cookieName):!1}function u(a){return F===a}function v(a){return"desc"===G&&u(a)}function w(){var a=new Date;a.setFullYear(a.getFullYear()+10),document.cookie=C.cookieName+"="+(new Date).getTime()+"; expires="+a.toGMTString()+"; path=/"}function x(){return H?void(H=!1):void jQuery("html, body").animate({scrollTop:b.offset().top},400)}function y(a){var b="; "+document.cookie,c=b.split("; "+a+"=");return 2===c.length?c.pop().split(";").shift():void 0}function z(a){return a&&Drupal.settings[a]?angular.extend(Drupal.settings[a],Drupal.settings.recatLibrary):Drupal.settings.recatLibrary}var A=9,B=this,C=z(c.instance),D=[],E=C.condition,F="",G="",H=!0;if(B.loaded=!1,B.loading=!0,B.currentPage=0,B.totalPages=0,B.pages=[],B.nodes=[],B.searchQuery="",B.errorMessage="",B.pagePrevious=e,B.pageNext=f,B.pageChange=g,B.filterChange=h,B.sortingChange=i,B.queryChange=j,B.downloadFile=k,B.requestFile=l,B.isSortingActive=u,B.isSortingOrderDesc=v,B.isFirstDownloadRequest=t(),B.firstDownloadRequestUrl=C.overlayUrl,C.tid)for(var I=C.tid.split(","),J=0,K=I.length;K>J;J+=1)D.push(I[J]);m()}angular.module("recatLibrary").controller("ListingController",a),a.$inject=["$scope","$element","$attrs","core.service.library"]}();